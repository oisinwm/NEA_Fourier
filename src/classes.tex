\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{cmath}
\PY{k+kn}{import} \PY{n+nn}{math}


\PY{k}{class} \PY{n+nc}{Matrix}\PY{p}{:}
    \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}A  n*m matrix class, can be constructed from a list of objects or a 2d list of objects}
\PY{l+s+sd}{        e.g.}
\PY{l+s+sd}{        a = Matrix([[1,2], [3,4]])}
\PY{l+s+sd}{        a = Matrix(m=10, n=10)}
\PY{l+s+sd}{        Methods:}
\PY{l+s+sd}{            \PYZus{}\PYZus{}init\PYZus{}\PYZus{}}
\PY{l+s+sd}{            \PYZus{}\PYZus{}rmul\PYZus{}\PYZus{}}
\PY{l+s+sd}{            \PYZus{}\PYZus{}add\PYZus{}\PYZus{}}
\PY{l+s+sd}{            \PYZus{}\PYZus{}sub\PYZus{}\PYZus{}}
\PY{l+s+sd}{    \PYZdq{}\PYZdq{}\PYZdq{}}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{o}{*}\PY{n}{args}\PY{p}{,} \PY{o}{*}\PY{o}{*}\PY{n}{kwargs}\PY{p}{)}\PY{p}{:}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{number\PYZus{}types} \PY{o}{=} \PY{p}{(}\PY{n+nb}{int}\PY{p}{,} \PY{n+nb}{float}\PY{p}{,} \PY{n+nb}{complex}\PY{p}{)}
        \PY{c+c1}{\PYZsh{}self.matrix\PYZus{}types = (\PYZus{}\PYZus{}name\PYZus{}\PYZus{}.Matrix, \PYZus{}\PYZus{}name\PYZus{}\PYZus{}.Fourier)}
        \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0} \PY{o+ow}{and} \PY{n+nb}{len}\PY{p}{(}\PY{n}{kwargs}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{2}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} construct from a and b, if validation passes}
            \PY{k}{if} \PY{n}{kwargs}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)} \PY{o}{==} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{n}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+m+mi}{0}\PY{p}{\PYZcb{}}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n+nb}{int}\PY{p}{)} \PY{o+ow}{and} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{n}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n+nb}{int}\PY{p}{)}\PY{p}{:}
                    \PY{k}{if} \PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{o+ow}{and} \PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{n}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                        \PY{c+c1}{\PYZsh{} construct}
                        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions} \PY{o}{=} \PY{p}{[}\PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{n}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{]}
                        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{l+m+mi}{0} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{n}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]} \PY{k}{for} \PY{n}{y} \PY{o+ow}{in}
                                          \PY{n+nb}{range}\PY{p}{(}\PY{n}{kwargs}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{p}{]}
                    \PY{k}{else}\PY{p}{:}
                        \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Matrix dimension cannot be less than 0}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

                \PY{k}{else}\PY{p}{:}
                    \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{l+s+s2}{Invalid type for dimensions: }
\PY{l+s+s2}{                                    [\PYZob{}type(kwargs[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{])\PYZcb{}, \PYZob{}type(kwargs[}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{n}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{])\PYZcb{}]}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{p}{)}

            \PY{k}{else}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{l+s+s2}{Invalid kwargs \PYZob{}kwargs\PYZcb{} must be }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{m}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ and }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{n}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{p}{)}

        \PY{k}{elif} \PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{1} \PY{o+ow}{and} \PY{n+nb}{len}\PY{p}{(}\PY{n}{kwargs}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} construct from values}
            \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n+nb}{list}\PY{p}{)}\PY{p}{:}
                \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                    \PY{c+c1}{\PYZsh{} Can construct from list of objects OR}
                    \PY{c+c1}{\PYZsh{} List of lists of objects}
                    \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n+nb}{list}\PY{p}{)}\PY{p}{:}
                        \PY{n}{n} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
                        \PY{c+c1}{\PYZsh{} print(args, args[0], type(args), type(args[0]))}
                        \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                            \PY{k}{if} \PY{o+ow}{not} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]}\PY{p}{,} \PY{n+nb}{list}\PY{p}{)}\PY{p}{:}
                                \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}
                                    \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Invalid values for Matrix, must be only of type list}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
                            \PY{k}{for} \PY{n}{y} \PY{o+ow}{in} \PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]}\PY{p}{:}
                                \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{y}\PY{p}{,} \PY{n+nb}{list}\PY{p}{)}\PY{p}{:}
                                    \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}
                                        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Invalid values for 2D Matrix, must not be list}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
                                \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]}\PY{p}{)} \PY{o}{!=} \PY{n}{n}\PY{p}{:}
                                    \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}
                                        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Invalid values for 2D Matrix, must not of equal width}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
                        \PY{c+c1}{\PYZsh{} At this point, valid list of lists}
                        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents} \PY{o}{=} \PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions} \PY{o}{=} \PY{p}{[}\PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{]}

                    \PY{k}{else}\PY{p}{:}
                        \PY{c+c1}{\PYZsh{} At this point a 1D list is detected}
                        \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{:}
                            \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n+nb}{list}\PY{p}{)}\PY{p}{:}
                                \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}
                                    \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Invalid values for Matrix, must be only of type: list}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

                        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{]}
                        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents} \PY{o}{=} \PY{p}{[}\PY{n+nb}{list}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{]}
                        \PY{k}{if} \PY{n+nb}{all}\PY{p}{(}\PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)} \PY{o+ow}{or} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                            \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}

            \PY{k}{elif} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)} \PY{o+ow}{or} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents} \PY{o}{=} \PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{\PYZus{}contents}
                \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions} \PY{o}{=} \PY{n}{args}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{\PYZus{}dimensions}
            \PY{k}{else}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Invalid type for Matrix: \PYZob{}type(args[0])\PYZcb{}, must be list or matrix}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

        \PY{k}{else}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} don\PYZsq{}t construct, incorrect information given}
            \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{l+s+s2}{Invalid input length for Matrix: \PYZob{}type(args)\PYZcb{}, }
\PY{l+s+s2}{                                must be exactly 1 list}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{p}{)}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}getitem\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{key}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{key}\PY{p}{,} \PY{n+nb}{int}\PY{p}{)}\PY{p}{:}
            \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents}\PY{p}{[}\PY{n}{key}\PY{p}{]}
        \PY{k}{elif} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{key}\PY{p}{,} \PY{n+nb}{slice}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{:}
                \PY{n}{data} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents}\PY{p}{[}\PY{n}{key}\PY{p}{]}
                \PY{k}{return} \PY{n}{Matrix}\PY{p}{(}\PY{n}{data}\PY{p}{)}
            \PY{k}{else}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{KeyError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Slice not supported for matrices, only vectors}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{KeyError}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}setitem\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{key}\PY{p}{,} \PY{n}{value}\PY{p}{)}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} print(self.\PYZus{}contents, key)}
        \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{key}\PY{p}{,} \PY{n+nb}{int}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{key}\PY{p}{:}
                \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents}\PY{p}{[}\PY{n}{key}\PY{p}{]} \PY{o}{=} \PY{n}{value}
            \PY{k}{else}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{KeyError}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{KeyError}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}repr\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{n+nb}{str}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents}\PY{p}{)}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}rmul\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{other}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{other}\PY{p}{,} \PY{n+nb}{list}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{other}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{:}
                \PY{n}{other} \PY{o}{=} \PY{n}{other}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{other}\PY{p}{,} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{number\PYZus{}types}\PY{p}{)}\PY{p}{:}
            \PY{n}{result\PYZus{}matrix} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
            \PY{k}{for} \PY{n}{y} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                \PY{k}{if} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n+nb}{list}\PY{p}{)}\PY{p}{:}
                    \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                        \PY{n}{result\PYZus{}matrix}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]} \PY{o}{*} \PY{n}{other}
                \PY{k}{else}\PY{p}{:}
                    \PY{c+c1}{\PYZsh{} in this case a 1d matrix}
                    \PY{n}{result\PYZus{}matrix}\PY{p}{[}\PY{n}{y}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{y}\PY{p}{]} \PY{o}{*} \PY{n}{other}

        \PY{k}{elif} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)} \PY{o+ow}{or} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} Matrix multiplication should be handled by mul not rmul,}
            \PY{c+c1}{\PYZsh{}  if being found here then an error has occurred}
            \PY{k}{raise} \PY{n+ne}{NotImplementedError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Matrix multiplication should be handled by mul}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{TypeError}
        \PY{k}{return} \PY{n}{result\PYZus{}matrix}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}mul\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{other}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)} \PY{o+ow}{or} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{!=} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cannot multiply matrices of incorrect dimensions, }\PY{l+s+s2}{\PYZdq{}}
                                 \PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{self n (\PYZob{}self.\PYZus{}dimensions[1]\PYZcb{}) != other }\PY{l+s+s2}{\PYZdq{}}
                                 \PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{m (\PYZob{}other.get\PYZus{}dim()[0]\PYZcb{})}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{k}{else}\PY{p}{:}
                \PY{c+c1}{\PYZsh{} Multiply two matrices with the correct dimensions}
                \PY{n}{x} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                \PY{n}{y} \PY{o}{=} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
                \PY{n}{result\PYZus{}matrix} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{x}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{y}\PY{p}{)}

                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                    \PY{k}{for} \PY{n}{c} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                        \PY{n}{num} \PY{o}{=} \PY{l+m+mi}{0}  \PY{c+c1}{\PYZsh{} This is an issue when adding two matrices}
                        \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                            \PY{n}{a} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{*} \PY{n}{other}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{[}\PY{n}{c}\PY{p}{]}
                            \PY{k}{if} \PY{n}{num} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:}
                                \PY{n}{num} \PY{o}{=} \PY{n}{a}
                            \PY{k}{else}\PY{p}{:}
                                \PY{n}{num} \PY{o}{+}\PY{o}{=} \PY{n}{a}
                        \PY{n}{result\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{c}\PY{p}{]} \PY{o}{=} \PY{n}{num}

        \PY{k}{elif} \PY{n+nb}{isinstance}\PY{p}{(}\PY{n}{other}\PY{p}{,} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{number\PYZus{}types}\PY{p}{)}\PY{p}{:}
            \PY{n}{result\PYZus{}matrix} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n+nf+fm}{\PYZus{}\PYZus{}rmul\PYZus{}\PYZus{}}\PY{p}{(}\PY{n}{other}\PY{p}{)}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{TypeError}
        \PY{k}{return} \PY{n}{result\PYZus{}matrix}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}add\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{other}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)} \PY{o+ow}{or} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)} \PY{o}{!=} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}
                    \PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cannot add matrices of different dimensions, self (\PYZob{}self.get\PYZus{}dim()\PYZcb{}) != other (\PYZob{}other.get\PYZus{}dim()\PYZcb{})}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{k}{else}\PY{p}{:}
                \PY{n}{x} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                \PY{n}{y} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
                \PY{n}{result\PYZus{}matrix} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{x}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{y}\PY{p}{)}
                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{:}
                    \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{y}\PY{p}{)}\PY{p}{:}
                        \PY{n}{result\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{+} \PY{n}{other}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]}
                \PY{k}{return} \PY{n}{result\PYZus{}matrix}

        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{NotImplementedError}\PY{p}{(}
                \PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{unsupported operand type(s) for +: }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{\PYZob{}type(self)\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ and }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{\PYZob{}type(other)\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}sub\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{other}\PY{p}{)}\PY{p}{:}
        \PY{k}{if} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)} \PY{o+ow}{or} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)} \PY{o}{!=} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}
                    \PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cannot multiply matrices of different dimensions, self (\PYZob{}self.get\PYZus{}dim()\PYZcb{}) != other (\PYZob{}other.get\PYZus{}dim()\PYZcb{})}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{k}{else}\PY{p}{:}
                \PY{n}{x} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                \PY{n}{y} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
                \PY{n}{result\PYZus{}matrix} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{x}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{y}\PY{p}{)}
                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{:}
                    \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{y}\PY{p}{)}\PY{p}{:}
                        \PY{n}{result\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{other}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]}
                \PY{k}{return} \PY{n}{result\PYZus{}matrix}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{NotImplementedError}\PY{p}{(}
                \PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{unsupported operand type(s) for +: }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{\PYZob{}type(self)\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ and }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{\PYZob{}type(other)\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}abs\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{n}{x} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{y} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}
        \PY{n}{result\PYZus{}matrix} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{x}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{y}\PY{p}{)}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{:}
            \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{y}\PY{p}{)}\PY{p}{:}
                \PY{n}{result\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{)}
        \PY{k}{return} \PY{n}{result\PYZus{}matrix}

    \PY{k}{def} \PY{n+nf}{get\PYZus{}dim}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions}
    
    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{exp}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{n}{lst}\PY{p}{)}\PY{p}{:}
        \PY{n}{result} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{lst}\PY{p}{:}
            \PY{n}{result} \PY{o}{+}\PY{o}{=} \PY{p}{[}\PY{n}{cmath}\PY{o}{.}\PY{n}{exp}\PY{p}{(}\PY{n}{x} \PY{o}{*} \PY{n}{i}\PY{p}{)}\PY{p}{]}
        \PY{k}{return} \PY{n}{Matrix}\PY{p}{(}\PY{p}{[}\PY{n}{result}\PY{p}{]}\PY{p}{)}
    
    \PY{k}{def} \PY{n+nf}{concatenate}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{other}\PY{p}{,} \PY{n}{direction}\PY{p}{)}\PY{p}{:}
        \PY{n}{other\PYZus{}m}\PY{p}{,} \PY{n}{other\PYZus{}n} \PY{o}{=} \PY{n+nb}{zip}\PY{p}{(}\PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{)}
        \PY{n}{other\PYZus{}m}\PY{p}{,} \PY{n}{other\PYZus{}n} \PY{o}{=} \PY{n}{other\PYZus{}m}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{other\PYZus{}n}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{k}{if} \PY{o+ow}{not} \PY{p}{(}\PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)} \PY{o+ow}{or} \PY{n+nb}{issubclass}\PY{p}{(}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{,} \PY{n+nb}{type}\PY{p}{(}\PY{n}{other}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{unsupported type for concatanate: \PYZob{}type(other)\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{k}{if} \PY{n}{direction} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{vertical}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{v}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{:}
            \PY{k}{if} \PY{o+ow}{not} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{==} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{ValueError}

            \PY{n}{result} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{+} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}
                            \PY{n}{n}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}

            \PY{k}{for} \PY{n}{y} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                    \PY{n}{result}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]}

            \PY{k}{for} \PY{n}{y} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                    \PY{n}{result}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]} \PY{o}{=} \PY{n}{other}\PY{p}{[}\PY{n}{y} \PY{o}{\PYZhy{}} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]}

        \PY{k}{elif} \PY{n}{direction} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{horizontal}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{:}
            \PY{k}{if} \PY{o+ow}{not} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{==} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{ValueError}

            \PY{n}{result} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}
                            \PY{n}{n}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{+} \PY{n}{other}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}

            \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                \PY{k}{for} \PY{n}{y} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                    \PY{n}{result}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]}

            \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                \PY{k}{for} \PY{n}{y} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                    \PY{n}{result}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]} \PY{o}{=} \PY{n}{other}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x} \PY{o}{\PYZhy{}} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}

        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{ValueError}

        \PY{k}{return} \PY{n}{result}
        
    \PY{k}{def} \PY{n+nf}{section}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{mini}\PY{p}{,} \PY{n}{maxi}\PY{p}{,} \PY{n}{direction}\PY{p}{)}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} Takes either a horizontal or vertical slice of the matrix between}
        \PY{c+c1}{\PYZsh{} mini and maxi inclusive}
        \PY{k}{if} \PY{n}{direction} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{vertical}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{v}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{:}
            \PY{n}{result} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{maxi}\PY{o}{\PYZhy{}}\PY{n}{mini}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                \PY{n}{result}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{n}{mini}\PY{p}{:}\PY{p}{(}\PY{n}{maxi}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{]}
        
        \PY{k}{elif} \PY{n}{direction} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{horizontal}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{:}
            \PY{n}{result} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{maxi}\PY{o}{\PYZhy{}}\PY{n}{mini}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{result}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                \PY{n}{result}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{n}{i}\PY{o}{+}\PY{n}{mini}\PY{p}{]}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Incorrect direction for sectioning: \PYZob{}direction\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        
        \PY{k}{return} \PY{n}{result}


\PY{k}{class} \PY{n+nc}{Wave}\PY{p}{:}
    \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}A representation of a Wave file, must be created from a string containing the location of a}
\PY{l+s+sd}{     wave file on disk\PYZdq{}\PYZdq{}\PYZdq{}}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{path}\PY{p}{)}\PY{p}{:}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{path}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{rb}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)} \PY{k}{as} \PY{n}{raw\PYZus{}wave\PYZus{}file}\PY{p}{:}
            \PY{n}{contents} \PY{o}{=} \PY{n}{raw\PYZus{}wave\PYZus{}file}\PY{o}{.}\PY{n}{read}\PY{p}{(}\PY{p}{)}

        \PY{c+c1}{\PYZsh{} Check the header chunk for correctly set values}
        \PY{c+c1}{\PYZsh{} https://blogs.msdn.microsoft.com/dawate/2009/06/23/intro\PYZhy{}to\PYZhy{}audio\PYZhy{}programming\PYZhy{}part\PYZhy{}2\PYZhy{}demystifying\PYZhy{}the\PYZhy{}wav\PYZhy{}format/}
        \PY{c+c1}{\PYZsh{} The above article is nicely formatted but has a bunch of mistakes}
        \PY{k}{if} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{:}\PY{l+m+mi}{4}\PY{p}{]} \PY{o}{!=} \PY{l+s+sa}{b}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{RIFF}\PY{l+s+s2}{\PYZdq{}} \PY{o+ow}{or} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{8}\PY{p}{:}\PY{l+m+mi}{12}\PY{p}{]} \PY{o}{!=} \PY{l+s+sa}{b}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{WAVE}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{TypeError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Specified file is not in wave format}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

        \PY{n}{fileSize} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{:}\PY{l+m+mi}{8}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{fileSize} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{fileSize}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}  \PY{c+c1}{\PYZsh{} This correctly calculates filesize}
        \PY{n}{headerChunk} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{12}\PY{p}{]}

        \PY{n}{fmtSizeRaw} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{16}\PY{p}{:}\PY{l+m+mi}{20}\PY{p}{]}
        \PY{n}{fmtSize} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{fmtSizeRaw}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
        \PY{c+c1}{\PYZsh{} formatChunk = contents[12:20+fmtSize]}
        \PY{c+c1}{\PYZsh{} bytes 12:16 \PYZsq{}fmt \PYZsq{}}
        \PY{n}{sampleRate} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{24}\PY{p}{:}\PY{l+m+mi}{26}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{sampleRate} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{sampleRate}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}

        \PY{n}{channels} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{22}\PY{p}{:}\PY{l+m+mi}{24}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{channels} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{channels}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}

        \PY{n}{frameSize} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{32}\PY{p}{:}\PY{l+m+mi}{34}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameSize} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{frameSize}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}

        \PY{n}{bitDepth} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{34}\PY{p}{:}\PY{l+m+mi}{36}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{bitDepth} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{bitDepth}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}

        \PY{c+c1}{\PYZsh{} bytes 36:40 = \PYZdq{}data\PYZdq{}}
        \PY{n}{dataLen} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{l+m+mi}{40}\PY{p}{:}\PY{l+m+mi}{44}\PY{p}{]}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{dataLen} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{dataLen}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}

        \PY{c+c1}{\PYZsh{} Read in data from array}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameStartIndex} \PY{o}{=} \PY{l+m+mi}{44}

        \PY{n}{framesNum} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{dataLen} \PY{o}{/} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameSize}
        \PY{k}{if} \PY{n}{framesNum}\PY{o}{.}\PY{n}{is\PYZus{}integer}\PY{p}{(}\PY{p}{)}\PY{p}{:}
            \PY{n}{framesNum} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{framesNum}\PY{p}{)}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Non integer frame number}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameDataLists} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{channels}\PY{p}{)}\PY{p}{]}
        \PY{k}{for} \PY{n}{frame} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{framesNum}\PY{p}{)}\PY{p}{:}
            \PY{n}{start} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameStartIndex} \PY{o}{+} \PY{n}{frame} \PY{o}{*} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameSize}
            \PY{n}{end} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameStartIndex} \PY{o}{+} \PY{p}{(}\PY{n}{frame} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)} \PY{o}{*} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameSize}
            \PY{n}{data} \PY{o}{=} \PY{n}{contents}\PY{p}{[}\PY{n}{start}\PY{p}{:}\PY{n}{end}\PY{p}{]}
            \PY{k}{if} \PY{o+ow}{not} \PY{n+nb}{len}\PY{p}{(}\PY{n}{data}\PY{p}{)} \PY{o}{==} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{channels} \PY{o}{*} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{bitDepth} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{8}\PY{p}{:}
                \PY{k}{raise} \PY{n+ne}{ValueError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Invalid bit depth}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{n}{n} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{bitDepth} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{8}
            \PY{n}{samples} \PY{o}{=} \PY{p}{[}\PY{n}{data}\PY{p}{[}\PY{n}{i}\PY{p}{:}\PY{n}{i} \PY{o}{+} \PY{n}{n}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{data}\PY{p}{)}\PY{p}{,} \PY{n}{n}\PY{p}{)}\PY{p}{]}
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{channels}\PY{p}{)}\PY{p}{:}
                \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameDataLists}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{signed\PYZus{}int}\PY{p}{(}\PY{n}{samples}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}\PY{p}{]}\PY{p}{)}

        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{dataMatrix} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameDataLists}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
        \PY{k}{for} \PY{n}{channel} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameDataLists}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{dataMatrix}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n}{Matrix}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{frameDataLists}\PY{p}{[}\PY{n}{channel}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{little\PYZus{}bin}\PY{p}{(}\PY{n}{rawbytes}\PY{p}{)}\PY{p}{:}
        \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Returns the binary representation of an unsigned 32 bit integer,}
\PY{l+s+sd}{            from little endian hex\PYZdq{}\PYZdq{}\PYZdq{}}
        \PY{n}{bytez} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{rawbytes}\PY{p}{:}
            \PY{n}{bytez}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n+nb}{hex}\PY{p}{(}\PY{n}{i}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{o}{.}\PY{n}{zfill}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
        \PY{n}{hexstr} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{bytez}\PY{p}{[}\PY{p}{:}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
        \PY{n}{result} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}
        \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n}{hexstr}\PY{p}{:}
            \PY{n}{digits} \PY{o}{=} \PY{n+nb}{bin}\PY{p}{(}\PY{n+nb}{int}\PY{p}{(}\PY{n}{x}\PY{p}{,} \PY{l+m+mi}{16}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{o}{.}\PY{n}{zfill}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}
            \PY{n}{result} \PY{o}{+}\PY{o}{=} \PY{n}{digits}
        \PY{k}{return} \PY{n}{result}

    \PY{k}{def} \PY{n+nf}{signed\PYZus{}int}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{rawbytes}\PY{p}{)}\PY{p}{:}
        \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Returns the integer representation of a signed integer,}
\PY{l+s+sd}{            from binary\PYZdq{}\PYZdq{}\PYZdq{}}
        \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{bitDepth} \PY{o}{==} \PY{l+m+mi}{8} \PY{o+ow}{or} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{bitDepth} \PY{o}{==} \PY{l+m+mi}{16}\PY{p}{:}
            \PY{n}{binary} \PY{o}{=} \PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{rawbytes}\PY{p}{)}
            \PY{k}{if} \PY{n}{binary}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:}
                \PY{n}{res} \PY{o}{=} \PY{o}{\PYZhy{}}\PY{l+m+mi}{32768} \PY{o}{+} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{rawbytes}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
            \PY{k}{else}\PY{p}{:}
                \PY{n}{res} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{Wave}\PY{o}{.}\PY{n}{little\PYZus{}bin}\PY{p}{(}\PY{n}{rawbytes}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}
            \PY{k}{return} \PY{n}{res}

        \PY{k}{elif} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{bitDepth} \PY{o}{==} \PY{l+m+mi}{32}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} Data is a float (\PYZhy{}1.0f ro 1f)}
            \PY{k}{raise} \PY{n+ne}{NotImplementedError}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cannot read 32 bit wave file yet}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

    \PY{k}{def} \PY{n+nf}{get\PYZus{}channel}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{chan}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{dataMatrix}\PY{o}{.}\PY{n}{section}\PY{p}{(}\PY{n}{chan}\PY{p}{,} \PY{n}{chan}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{v}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

    \PY{k}{def} \PY{n+nf}{convert\PYZus{}hertz}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{vector}\PY{p}{)}\PY{p}{:}
        \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Converts a fourier transform output index to its value in Hz\PYZdq{}\PYZdq{}\PYZdq{}}
        \PY{n}{N} \PY{o}{=} \PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{T} \PY{o}{=} \PY{n}{N} \PY{o}{/} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{sampleRate}
        \PY{n}{df} \PY{o}{=} \PY{l+m+mi}{1} \PY{o}{/} \PY{n}{T}
        \PY{n}{result} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{N}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{k}{for} \PY{n}{n} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n}{n} \PY{o}{\PYZlt{}} \PY{n}{N} \PY{o}{/} \PY{l+m+mi}{2}\PY{p}{:}
                \PY{n}{result}\PY{p}{[}\PY{n}{n}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{df} \PY{o}{*} \PY{n}{n} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2}
            \PY{k}{else}\PY{p}{:}
                \PY{n}{result}\PY{p}{[}\PY{n}{n}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{df} \PY{o}{*} \PY{p}{(}\PY{n}{n} \PY{o}{\PYZhy{}} \PY{n}{N}\PY{p}{)} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2}
        \PY{k}{return} \PY{n}{result}


\PY{k}{class} \PY{n+nc}{Fourier}\PY{p}{(}\PY{n}{Matrix}\PY{p}{)}\PY{p}{:}
    \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Performs a fourier transform on one Matrix of time domain values and returns a Matrix of}
\PY{l+s+sd}{    frequency domain values\PYZdq{}\PYZdq{}\PYZdq{}}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{matrix}\PY{p}{,} \PY{n}{pad}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{)}\PY{p}{:}
        \PY{n+nb}{super}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n+nf+fm}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n}{matrix}\PY{p}{)}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}p} \PY{o}{=} \PY{n}{math}\PY{o}{.}\PY{n}{ceil}\PY{p}{(}\PY{n}{math}\PY{o}{.}\PY{n}{log}\PY{p}{(}\PY{n}{matrix}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
        
        \PY{k}{if} \PY{n}{pad}\PY{p}{:}
            \PY{n}{length} \PY{o}{=} \PY{l+m+mi}{2}\PY{o}{*}\PY{o}{*}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}p} \PY{o}{\PYZhy{}} \PY{n}{matrix}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
            \PY{k}{if} \PY{n}{length} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                \PY{n}{left} \PY{o}{=} \PY{n}{math}\PY{o}{.}\PY{n}{ceil}\PY{p}{(}\PY{n}{length}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{)}
                \PY{n}{right} \PY{o}{=} \PY{n}{length}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{2}
                \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}contents} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{left}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{v}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{right}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{v}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{o}{.}\PY{n}{\PYZus{}contents}
            \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}dimensions}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{2}\PY{o}{*}\PY{o}{*}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}p}
        
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}omega\PYZus{}N} \PY{o}{=} \PY{n}{cmath}\PY{o}{.}\PY{n}{exp}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{2j} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{pi} \PY{o}{/} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
        
    \PY{k}{def} \PY{n+nf}{get\PYZus{}p}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{n+nb}{int}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}p}\PY{p}{)}
        
    \PY{k}{def} \PY{n+nf}{get\PYZus{}omega}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}omega\PYZus{}N}

    \PY{k}{def} \PY{n+nf}{DFT}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{n}{N} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{operator} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{N}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{N}\PY{p}{)}
        \PY{k}{for} \PY{n}{x} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N}\PY{p}{)}\PY{p}{:}
            \PY{k}{for} \PY{n}{y} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N}\PY{p}{)}\PY{p}{:}
                \PY{n}{operator}\PY{p}{[}\PY{n}{y}\PY{p}{]}\PY{p}{[}\PY{n}{x}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{\PYZus{}omega\PYZus{}N} \PY{o}{*}\PY{o}{*} \PY{p}{(}\PY{n}{x} \PY{o}{*} \PY{n}{y}\PY{p}{)}
        \PY{k}{return} \PY{n}{operator} \PY{o}{*} \PY{n+nb+bp}{self}
    
    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{find\PYZus{}peaks}\PY{p}{(}\PY{n}{vector}\PY{p}{,} \PY{n}{lag}\PY{p}{,} \PY{n}{threshold}\PY{p}{,} \PY{n}{influence}\PY{p}{)}\PY{p}{:}
        \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}Algorithim from https://stackoverflow.com/questions/22583391/peak\PYZhy{}signal\PYZhy{}detection\PYZhy{}in\PYZhy{}realtime\PYZhy{}timeseries\PYZhy{}data/22640362\PYZsh{}22640362\PYZdq{}\PYZdq{}\PYZdq{}}
        \PY{n}{signals} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{filteredY} \PY{o}{=} \PY{n}{vector}
        \PY{n}{avgFilter} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{stdFilter} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{avgFilter}\PY{p}{[}\PY{n}{lag}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{=} \PY{n}{Fourier}\PY{o}{.}\PY{n}{avg}\PY{p}{(}\PY{n}{vector}\PY{o}{.}\PY{n}{section}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{lag}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
        \PY{n}{stdFilter}\PY{p}{[}\PY{n}{lag}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{=} \PY{n}{Fourier}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{vector}\PY{o}{.}\PY{n}{section}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n}{lag}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{lag}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{vector}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{avgFilter}\PY{p}{[}\PY{n}{i}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{threshold} \PY{o}{*} \PY{n}{stdFilter}\PY{p}{[}\PY{n}{i}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{:}
                \PY{k}{if} \PY{n}{vector}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{avgFilter}\PY{p}{[}\PY{n}{i}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{:}
                    \PY{n}{signals}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{1}
                \PY{k}{else}\PY{p}{:}
                    \PY{n}{signals}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}
                \PY{n}{filteredY}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{influence}\PY{o}{*}\PY{n}{vector}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{+} \PY{p}{(}\PY{l+m+mi}{1}\PY{o}{\PYZhy{}}\PY{n}{influence}\PY{p}{)}\PY{o}{*}\PY{n}{filteredY}\PY{p}{[}\PY{n}{i}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                
            \PY{k}{else}\PY{p}{:}
                \PY{n}{signals}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{l+m+mi}{0}
                \PY{n}{filteredY}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{vector}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
            
            \PY{n}{avgFilter}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{Fourier}\PY{o}{.}\PY{n}{avg}\PY{p}{(}\PY{n}{filteredY}\PY{o}{.}\PY{n}{section}\PY{p}{(}\PY{n}{i}\PY{o}{\PYZhy{}}\PY{n}{lag}\PY{p}{,} \PY{n}{i}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
            \PY{n}{stdFilter}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{Fourier}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{filteredY}\PY{o}{.}\PY{n}{section}\PY{p}{(}\PY{n}{i}\PY{o}{\PYZhy{}}\PY{n}{lag}\PY{p}{,} \PY{n}{i}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
        
        \PY{k}{return} \PY{n}{signals}
    
    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{filter\PYZus{}peaks}\PY{p}{(}\PY{n}{lst}\PY{p}{)}\PY{p}{:}
        \PY{n}{lst} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{lst}\PY{p}{)}
        \PY{n}{result\PYZus{}list} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{k}{while} \PY{n+nb}{len}\PY{p}{(}\PY{n}{lst}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
            \PY{n}{temp} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{n}{lst}\PY{o}{.}\PY{n}{pop}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{]}\PY{p}{]}
            \PY{k}{while} \PY{n+nb}{len}\PY{p}{(}\PY{n}{lst}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{o+ow}{and} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{Fourier}\PY{o}{.}\PY{n}{avg}\PY{p}{(}\PY{n}{Matrix}\PY{p}{(}\PY{n}{temp}\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{lst}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{o}{\PYZlt{}} \PY{l+m+mi}{6}\PY{o}{*}\PY{n+nb}{len}\PY{p}{(}\PY{n}{temp}\PY{p}{)}\PY{p}{:}
                \PY{n}{temp}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{[}\PY{n}{lst}\PY{o}{.}\PY{n}{pop}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{]}\PY{p}{)}
            \PY{n}{result\PYZus{}list}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n+nb}{int}\PY{p}{(}\PY{n}{Fourier}\PY{o}{.}\PY{n}{avg}\PY{p}{(}\PY{n}{Matrix}\PY{p}{(}\PY{n}{temp}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{)}
        \PY{k}{return} \PY{n}{result\PYZus{}list}
        
    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{avg}\PY{p}{(}\PY{n}{vector}\PY{p}{)}\PY{p}{:}
        \PY{n}{n} \PY{o}{=} \PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{total} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{vector}\PY{o}{.}\PY{n}{\PYZus{}contents}\PY{p}{]}\PY{p}{)}
        \PY{k}{return} \PY{n}{total} \PY{o}{/} \PY{n}{n}
    
    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{std}\PY{p}{(}\PY{n}{vector}\PY{p}{)}\PY{p}{:}
        \PY{n}{n} \PY{o}{=} \PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{total} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{vector}\PY{p}{]}\PY{p}{)}
        \PY{k}{return} \PY{n}{math}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n}{total} \PY{o}{/} \PY{n}{n} \PY{o}{\PYZhy{}} \PY{n}{Fourier}\PY{o}{.}\PY{n}{avg}\PY{p}{(}\PY{n}{vector}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}

    \PY{k}{def} \PY{n+nf}{FFT}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{n}{N} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{k}{if} \PY{n}{N} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+m+mi}{2}\PY{p}{:}
            \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{DFT}\PY{p}{(}\PY{p}{)}
        \PY{k}{else}\PY{p}{:}
            \PY{n}{even}\PY{p}{,} \PY{n}{odd} \PY{o}{=} \PY{n+nb+bp}{self}\PY{p}{[}\PY{p}{:}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{,} \PY{n+nb+bp}{self}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{:}\PY{l+m+mi}{2}\PY{p}{]}
            \PY{n}{even}\PY{p}{,} \PY{n}{odd} \PY{o}{=} \PY{n}{Fourier}\PY{p}{(}\PY{n}{Matrix}\PY{p}{(}\PY{n}{even}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{n}{Fourier}\PY{p}{(}\PY{n}{Matrix}\PY{p}{(}\PY{n}{odd}\PY{p}{)}\PY{p}{)}
            \PY{n}{even}\PY{p}{,} \PY{n}{odd} \PY{o}{=} \PY{n}{even}\PY{o}{.}\PY{n}{FFT}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{odd}\PY{o}{.}\PY{n}{FFT}\PY{p}{(}\PY{p}{)}
            
            \PY{n}{factor} \PY{o}{=} \PY{n}{Fourier}\PY{o}{.}\PY{n}{exp}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{2j} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{pi} \PY{o}{/} \PY{n}{N}\PY{p}{,} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{range}\PY{p}{(}\PY{n}{N}\PY{p}{)}\PY{p}{)}\PY{p}{)}
            
            \PY{n}{first} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{even}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{even}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
            \PY{n}{second} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{even}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{n}{even}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
            
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{even}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
                \PY{n}{first}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{even}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{+} \PY{n}{factor}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{p}{:}\PY{n}{N} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2}\PY{p}{]}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{*} \PY{n}{odd}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                \PY{n}{second}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{even}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{+} \PY{n}{factor}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{n}{N} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{*} \PY{n}{odd}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
            
            \PY{k}{return} \PY{n}{Fourier}\PY{p}{(}\PY{n}{first}\PY{o}{.}\PY{n}{concatenate}\PY{p}{(}\PY{n}{second}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{v}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}

    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{rms}\PY{p}{(}\PY{n}{vector}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{n}{math}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n+nb}{sum}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{*}\PY{o}{*} \PY{l+m+mi}{2} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{vector}\PY{p}{]}\PY{p}{)} \PY{o}{/} \PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}

    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{blackman\PYZus{}harris}\PY{p}{(}\PY{n}{vector}\PY{p}{)}\PY{p}{:}
        \PY{n}{a} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.35875}\PY{p}{,} \PY{l+m+mf}{0.48829}\PY{p}{,} \PY{l+m+mf}{0.14128}\PY{p}{,} \PY{l+m+mf}{0.01168}\PY{p}{]}
        \PY{n}{N} \PY{o}{=} \PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{result} \PY{o}{=} \PY{n}{Fourier}\PY{p}{(}\PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{N}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N}\PY{p}{)}\PY{p}{:}
            \PY{n}{window} \PY{o}{=} \PY{n}{a}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{a}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{cos}\PY{p}{(}\PY{p}{(}\PY{l+m+mi}{2} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{pi} \PY{o}{*} \PY{n}{i}\PY{p}{)} \PY{o}{/} \PY{p}{(}\PY{n}{N} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)} \PY{o}{+} \PY{n}{a}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{cos}\PY{p}{(}
                \PY{p}{(}\PY{l+m+mi}{4} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{pi} \PY{o}{*} \PY{n}{i}\PY{p}{)} \PY{o}{/} \PY{p}{(}\PY{n}{N} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{a}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{cos}\PY{p}{(}\PY{p}{(}\PY{l+m+mi}{6} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{pi} \PY{o}{*} \PY{n}{i}\PY{p}{)} \PY{o}{/} \PY{p}{(}\PY{n}{N} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
            \PY{n}{result}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{window} \PY{o}{*} \PY{n}{vector}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{k}{return} \PY{n}{result}

    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{med}\PY{p}{(}\PY{n}{vector}\PY{p}{)}\PY{p}{:}
        \PY{n}{values} \PY{o}{=} \PY{n+nb}{sorted}\PY{p}{(}\PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{vector}\PY{p}{]}\PY{p}{)}
        \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{values}\PY{p}{)} \PY{o}{\PYZpc{}} \PY{l+m+mi}{2} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:}
            \PY{n}{x} \PY{o}{=} \PY{n}{values}\PY{p}{[}\PY{n+nb}{len}\PY{p}{(}\PY{n}{values}\PY{p}{)} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{:}\PY{n+nb}{len}\PY{p}{(}\PY{n}{values}\PY{p}{)} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{]}
            \PY{k}{return} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{x}\PY{p}{)} \PY{o}{/} \PY{l+m+mi}{2}
        \PY{k}{else}\PY{p}{:}
            \PY{k}{return} \PY{n}{values}\PY{p}{[}\PY{n+nb}{len}\PY{p}{(}\PY{n}{values}\PY{p}{)} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2}\PY{p}{]}

    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{median\PYZus{}filter}\PY{p}{(}\PY{n}{vector}\PY{p}{,} \PY{n}{size}\PY{p}{)}\PY{p}{:}
        \PY{n}{y} \PY{o}{=} \PY{n}{Matrix}\PY{p}{(}\PY{n}{m}\PY{o}{=}\PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{y}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{vector}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{y}\PY{p}{[}\PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{vector}\PY{p}{[}\PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{end} \PY{o}{=} \PY{n}{size} \PY{o}{/} \PY{l+m+mi}{2}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{int}\PY{p}{(}\PY{n}{vector}\PY{o}{.}\PY{n}{get\PYZus{}dim}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{end}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{size}\PY{p}{)}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} print(vector.get\PYZus{}dim()[0], i+size\PYZhy{}1, i, int(vector.get\PYZus{}dim()[0]\PYZhy{}end))}
            \PY{n}{window} \PY{o}{=} \PY{n}{vector}\PY{o}{.}\PY{n}{section}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{i} \PY{o}{+} \PY{n}{size} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{h}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{n}{y}\PY{p}{[}\PY{n+nb}{int}\PY{p}{(}\PY{n}{end} \PY{o}{+} \PY{n}{i}\PY{p}{)}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{Fourier}\PY{o}{.}\PY{n}{med}\PY{p}{(}\PY{n}{window}\PY{p}{)}
        \PY{k}{return} \PY{n}{y}


\PY{k}{class} \PY{n+nc}{Midi}\PY{p}{:}
    \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}A representation of a midi file,}
\PY{l+s+sd}{     can be written to an actual file through use of .write(filename)\PYZdq{}\PYZdq{}\PYZdq{}}

    \PY{k}{def} \PY{n+nf+fm}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{format} \PY{o}{=} \PY{l+m+mi}{0}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{tracks} \PY{o}{=} \PY{l+m+mi}{1}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{division} \PY{o}{=} \PY{l+m+mi}{96}
        \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{events} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{]}

    \PY{k}{def} \PY{n+nf}{hz\PYZus{}to\PYZus{}key}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{hz}\PY{p}{)}\PY{p}{:}
        \PY{n}{x} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{l+m+mi}{69} \PY{o}{+} \PY{l+m+mi}{12} \PY{o}{*} \PY{n}{math}\PY{o}{.}\PY{n}{log}\PY{p}{(}\PY{n}{hz} \PY{o}{/} \PY{l+m+mi}{440}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
        \PY{k}{if} \PY{n}{x} \PY{o+ow}{not} \PY{o+ow}{in} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{128}\PY{p}{)}\PY{p}{)}\PY{p}{:}
            \PY{k}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{broken \PYZob{}x\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{k}{return} \PY{n+nb}{hex}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}

    \PY{k}{def} \PY{n+nf}{velocity\PYZus{}to\PYZus{}hex}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{v}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{40}\PY{l+s+s2}{\PYZdq{}}

    \PY{k}{def} \PY{n+nf}{sample\PYZus{}to\PYZus{}tick}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{sample}\PY{p}{)}\PY{p}{:}
        \PY{k}{return} \PY{n+nb}{int}\PY{p}{(}\PY{n+nb}{int}\PY{p}{(}\PY{n}{sample}\PY{p}{)} \PY{o}{/}\PY{o}{/} \PY{p}{(}\PY{l+m+mi}{44100} \PY{o}{/} \PY{p}{(}\PY{l+m+mi}{2} \PY{o}{*} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{division}\PY{p}{)}\PY{p}{)}\PY{p}{)}

    \PY{k}{def} \PY{n+nf}{add\PYZus{}note}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{start\PYZus{}sample}\PY{p}{,} \PY{n}{end\PYZus{}sample}\PY{p}{,} \PY{n}{note}\PY{p}{,} \PY{n}{velocity}\PY{p}{,} \PY{n}{channel}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} At 120 BPM, 1s = 2b}
        \PY{c+c1}{\PYZsh{} 96 ticks per 1/4 note}
        \PY{c+c1}{\PYZsh{} 230 samples per tick}
        \PY{n}{note\PYZus{}on} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{9}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{hex}\PY{p}{(}\PY{n}{channel}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]} \PY{o}{+} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{hz\PYZus{}to\PYZus{}key}\PY{p}{(}\PY{n}{note}\PY{p}{)} \PY{o}{+} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{velocity\PYZus{}to\PYZus{}hex}\PY{p}{(}\PY{n}{velocity}\PY{p}{)}
        \PY{n}{note\PYZus{}off} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{8}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{hex}\PY{p}{(}\PY{n}{channel}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]} \PY{o}{+} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{hz\PYZus{}to\PYZus{}key}\PY{p}{(}\PY{n}{note}\PY{p}{)} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{40}\PY{l+s+s2}{\PYZdq{}}
        \PY{k}{if} \PY{n+nb}{int}\PY{p}{(}\PY{n}{end\PYZus{}sample}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n+nb}{int}\PY{p}{(}\PY{n}{start\PYZus{}sample}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{l+m+mi}{1000}\PY{p}{:}
            \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{events}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{sample\PYZus{}to\PYZus{}tick}\PY{p}{(}\PY{n}{start\PYZus{}sample}\PY{p}{)}\PY{p}{,} \PY{n}{note\PYZus{}on}\PY{p}{)}\PY{p}{)}
            \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{events}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{sample\PYZus{}to\PYZus{}tick}\PY{p}{(}\PY{n}{end\PYZus{}sample}\PY{p}{)}\PY{p}{,} \PY{n}{note\PYZus{}off}\PY{p}{)}\PY{p}{)}

    \PY{k}{def} \PY{n+nf}{write}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{filename}\PY{p}{)}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} Prepare file header}
        \PY{n}{header} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{4d54686400000006}\PY{l+s+s2}{\PYZdq{}}
        \PY{n}{header} \PY{o}{+}\PY{o}{=} \PY{n+nb}{hex}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{format}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{o}{.}\PY{n}{zfill}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}
        \PY{n}{header} \PY{o}{+}\PY{o}{=} \PY{n+nb}{hex}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{tracks}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{o}{.}\PY{n}{zfill}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}
        \PY{n}{header} \PY{o}{+}\PY{o}{=} \PY{n+nb}{hex}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{division}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{o}{.}\PY{n}{zfill}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{)}

        \PY{c+c1}{\PYZsh{} Prepare track data}
        \PY{n}{track\PYZus{}data} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}
        \PY{n}{ordered\PYZus{}events} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{sorted}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{events}\PY{p}{,} \PY{n}{key}\PY{o}{=}\PY{k}{lambda} \PY{n}{tup}\PY{p}{:} \PY{n}{tup}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}
        \PY{n}{delta\PYZus{}times} \PY{o}{=} \PY{p}{[}\PY{n}{ordered\PYZus{}events}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZhy{}} \PY{n}{ordered\PYZus{}events}\PY{p}{[}\PY{n}{i} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in}
                       \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{ordered\PYZus{}events}\PY{p}{)}\PY{p}{)}\PY{p}{]}
        \PY{n}{delta\PYZus{}vlq} \PY{o}{=} \PY{p}{[}\PY{n}{Midi}\PY{o}{.}\PY{n}{vlq}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{delta\PYZus{}times}\PY{p}{]}
        \PY{k}{for} \PY{n}{index}\PY{p}{,} \PY{n}{event} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{ordered\PYZus{}events}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n}{index} \PY{o}{!=} \PY{l+m+mi}{0}\PY{p}{:}  \PY{c+c1}{\PYZsh{} Empty event to begin}
                \PY{n}{track\PYZus{}data} \PY{o}{+}\PY{o}{=} \PY{n}{delta\PYZus{}vlq}\PY{p}{[}\PY{n}{index} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{]} \PY{o}{+} \PY{n}{event}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}

        \PY{n}{track\PYZus{}data} \PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{19ff2f0000ff2f00}\PY{l+s+s2}{\PYZdq{}}  \PY{c+c1}{\PYZsh{} End of track event}

        \PY{c+c1}{\PYZsh{} Prepare track header}
        \PY{n}{track\PYZus{}header} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{4d54726b}\PY{l+s+s2}{\PYZdq{}}
        \PY{n}{track\PYZus{}header} \PY{o}{+}\PY{o}{=} \PY{n+nb}{hex}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{track\PYZus{}data}\PY{p}{)} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{o}{.}\PY{n}{zfill}\PY{p}{(}\PY{l+m+mi}{8}\PY{p}{)}

        \PY{c+c1}{\PYZsh{} Write file}
        \PY{n}{final\PYZus{}hex\PYZus{}string} \PY{o}{=} \PY{n}{header} \PY{o}{+} \PY{n}{track\PYZus{}header} \PY{o}{+} \PY{n}{track\PYZus{}data}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{filename}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{wb}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)} \PY{k}{as} \PY{n}{midi\PYZus{}file}\PY{p}{:}
            \PY{n}{midi\PYZus{}file}\PY{o}{.}\PY{n}{write}\PY{p}{(}\PY{n+nb}{bytearray}\PY{o}{.}\PY{n}{fromhex}\PY{p}{(}\PY{n}{final\PYZus{}hex\PYZus{}string}\PY{p}{)}\PY{p}{)}

    \PY{n+nd}{@staticmethod}
    \PY{k}{def} \PY{n+nf}{vlq}\PY{p}{(}\PY{n}{value}\PY{p}{)}\PY{p}{:}
        \PY{n}{bits} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{bin}\PY{p}{(}\PY{n}{value}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]}\PY{p}{)}
        \PY{k}{while} \PY{n+nb}{len}\PY{p}{(}\PY{n}{bits}\PY{p}{)} \PY{o}{\PYZpc{}} \PY{l+m+mi}{7} \PY{o}{!=} \PY{l+m+mi}{0}\PY{p}{:}
            \PY{n}{bits} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{+} \PY{n}{bits}
        \PY{n}{rev\PYZus{}bits} \PY{o}{=} \PY{n}{bits}\PY{p}{[}\PY{p}{:}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
        \PY{n}{result} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{rev\PYZus{}bits}\PY{p}{)}\PY{p}{:}
            \PY{n}{result}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{value}\PY{p}{)}
            \PY{k}{if} \PY{p}{(}\PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{7}\PY{p}{:}
                \PY{n}{result}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{0}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{k}{elif} \PY{p}{(}\PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)} \PY{o}{\PYZpc{}} \PY{l+m+mi}{7} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:}
                \PY{n}{result}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{binary\PYZus{}str} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{result}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
        \PY{n}{hex\PYZus{}result} \PY{o}{=} \PY{p}{[}\PY{n+nb}{hex}\PY{p}{(}\PY{n+nb}{int}\PY{p}{(}\PY{n}{binary\PYZus{}str}\PY{p}{[}\PY{n}{i}\PY{p}{:}\PY{n}{i} \PY{o}{+} \PY{l+m+mi}{4}\PY{p}{]}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{:}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{binary\PYZus{}str}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{)}\PY{p}{]}
        \PY{k}{return} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{hex\PYZus{}result}\PY{p}{)}
\end{Verbatim}
